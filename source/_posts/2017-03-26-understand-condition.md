title: 理解条件等待Condition
date: 2017-03-26 17:17:07
categories: Java并发演进之路
tags: [Condition,条件,阻塞,唤醒]
---
<img src="/img/understand.png" width="300" class="img-topic" />
Condtion也被称为条件队列（condition queues）或者条件变量（condition variables）是利用线程间共享的全局变量进行同步的一种机制。主要包括两个动作：一个线程等待“条件谓词成立”而挂起；另一个线程使“条件谓词成立”，发出条件成立信号。由于对共享状态信息的访问发生在多线程中，因此条件变量的使用是需要结合锁机制的（一般是互斥锁）。也就是说，一个线程要等到临界区的共享数据达到某种状态时再进行某种操作，而这个状态的成立，则是由另外一个线程来完成后发送信号来通知的。
<!--more-->

本文从条件等待的标准形式说开来，解释Condition相关的术语，等待队列图从直观的角度理解条件等待，最后会对比内置监视器队列和条件队列的异同点。主要包括以下内容：
- 从条件等待的标准形式说开来
- 专业术语
- 等待队列图
- Object VS ConditionObject
- ConditionObject使用场景

## 从条件等待的标准形式说开来

```java
获取锁;
while (条件状态不满足) {
    释放锁;
    线程挂起等待，直到条件满足通知;
    重新获取锁;
}

对临界区保护的数据操作;
释放锁;
```