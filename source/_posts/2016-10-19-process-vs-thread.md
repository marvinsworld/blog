title: 进程 OR 线程
date: 2016-10-19 17:55:45
categories: Java并发演进之路
tags: [线程,进程,资源,通讯方式]
---
<img src="/img/address-space.png" class="img-topic" />
进程（Process）和线程（Thread）是操作系统的基本概念。这两个内容也一直困扰着我，如何理解，要讨论清楚进程和线程，涉及的内容很多，我更多关注的是对深入研究并发能提供哪些指导意义，在使用如何选择。
<!--more-->

## 进程是什么
进程是程序的动态过程。程序是指令的集合，而进程是程序的运行时态，是系统进行资源分配和调度的一个独立单位。进程运行时会从内存中划出一块连续独立的地址空间（Address Space）供自己使用，进程与其他进程间是隔离的。

## 线程是什么
线程是轻量级的进程，是粒度更细的进程。为了最大化使用进程占用的系统资源，按照程序的执行单元拆分，就有了线程，是CPU调度的基本单元。

## 区别
1. 进程是操作系统分配资源的最小单位，线程CPU执行的最小单位。
2. 进程之间有独立的内存地址空间，而线程共享同一进程中的内存地址空间（线程由线程ID、当前指令指针、寄存器和堆栈组成）。
3. 进程的创建、销毁和切换很慢，而线程却很快。
4. 进程的隔离度高，进程之间不会相互影响。线程间由于没有单独的地址空间，一个线程down掉会影响这个进程。

下图是借过来的，引自CSDN。
![进程与线程的资源共享关系](/img/process-thread.png "进程与线程的资源共享关系")

## 通讯方式
进程间或线程间都会进行通讯。进程间通信方式不外乎两种：1）共享内存，2）消息传递。线程之间数据大部分共享，通过共享内存方式更加方便。正是因为线程使用了共享内存的方式进行同步，才有了JAVA并发中后续的一系列内容。进程通信和线程同步是程序中很重要的一部分。

## 最后
进程，线程孰优孰劣，这个问题不能一概而论。例如Nignx内部采用的就是进程模型，好处是进程间相互独立，互相不受影响，其中一个进程退出后，其他进程仍然在工作，对外提供服务不会因此而中断。因此在设计时需要结合自身项目，综合考量，找到最适合自己的。

## 参考
1. [编程思想之多线程与多进程(1)——以操作系统的角度述说线程与进程](http://blog.csdn.net/luoweifu/article/details/46595285)
2. [Java并发编程：进程和线程之由来](http://m.blog.chinaunix.net/uid-29399573-id-4462170.html)
3. [同一进程中的线程究竟共享哪些资源 ](http://blog.chinaunix.net/uid-26922071-id-3894371.html)
4. [进程与线程的一个简单解释](http://www.ruanyifeng.com/blog/2013/04/processes_and_threads.html)
5. [进程和线程的区别](http://www.cnblogs.com/lmule/archive/2010/08/18/1802774.html)
6. [多线程还是多进程的选择及区别](hhttp://blog.csdn.net/pingd/article/details/17895933)


